---
layout: post
status: publish
published: true
title: 'iDoorbell - Arduino powered iPhone notifications '
author:
  display_name: martin
  login: martin
  email: martin@freakent.co.uk
  url: http://www.freakent.co.uk
author_login: martin
author_email: martin@freakent.co.uk
author_url: http://www.freakent.co.uk
wordpress_id: 479
wordpress_url: http://www.freakent.co.uk/?p=479
date: '2011-11-07 13:07:36 +0000'
date_gmt: '2011-11-07 13:07:36 +0000'
categories:
- Internet of Things
tags:
- wifi
- Arduino
- iphone
- prowl
comments:
- id: 231
  author: iDoorbell v2 &#8211; Using Prowl, Arduino, XBee and ACS712 Current Sensor
    &#8211; Stuff for the Easily Distracted
  author_email: ''
  author_url: http://www.freakent.co.uk/2012/02/10/idoorbell-v2-using-prowl-arduino-xbee-and-acs712-current-sensor/
  date: '2013-01-09 13:36:52 +0000'
  date_gmt: '2013-01-09 13:36:52 +0000'
  content: "[...] year I created a project to Internet enable my doorbell. The idea
    was to send an alert to my iPhone using Prowl whenever someone presses the doorbell.
    An [...]"
- id: 502
  author: Jorge
  author_email: jorge.galhardo.antunes@gmail.com
  author_url: ''
  date: '2013-05-04 09:39:41 +0100'
  date_gmt: '2013-05-04 09:39:41 +0100'
  content: |-
    Hi,

    I would like to know more about your project and results, can I contact you by email ?

    thanks
    Jorge
- id: 503
  author: martin
  author_email: martin@freakent.co.uk
  author_url: http://www.freakent.co.uk
  date: '2013-05-04 10:11:36 +0100'
  date_gmt: '2013-05-04 10:11:36 +0100'
  content: |-
    Hi Jorge, I'd rather you use the comments system so we can share the conversation with others. What did you want to know more about?

    Martin
---
<p><a href="http://www.freakent.co.uk/2011/11/07/idoorbell/img_1456/" rel="attachment wp-att-565"><img class=" wp-image-565 alignright" alt="iDoorbell screen shot" src="http://www.freakent.co.uk/wp-content/uploads/2013/01/IMG_1456.jpg" width="146" height="224" /></a></p>
<p><em><strong>Please Note</strong>: This project was updated and improved and is described here :&nbsp;<a title="iDoorbell v2 &ndash; Using Prowl, Arduino, XBee ZB and ACS712 Current Sensor" href="http://www.freakent.co.uk/2012/02/10/idoorbell-v2-using-prowl-arduino-xbee-and-acs712-current-sensor/">iDoorbell v2</a></em></p>
<p>I am a software guy and have very little experience with electronics. I am hoping that playing around with Arduino will help me learn a thing or two about resistors, capacitors and the like.</p>
<p>I have started a project using my Arduino that notifies my iPhone whenever a switch&nbsp;in a separate circuit&nbsp;is closed. The plan is to connect this to our home doorbell so as well as the usual ding-dong we also get an iPhone alert. Software-wise this works great using a Wifly shield to enable the Arduino to talk the the Prowl notification service on the Internet over http. It's kind of a wifi version of the project described here&nbsp;<a href="http://blog.makezine.com/archive/2010/12/snail-mail-push-alerts.html">http://blog.makezine.com/archive/2010/12/snail-mail-push-alerts.html</a>.</p>
<p><!--more-->Now the problem I have is how to properly connect the Arduino to the doorbell circuit. The doorbell circuit is powered by a transformer that deliver 5V AC at 1mA. Note AC not DC. I tried measuring the voltage across the transformer using my meter but it read 13.8 so I'm not sure why that is. I want to detect a connection in the AC circuit and notify an Arduino digital input pin. I have been trying to use a H11AA1X optocoupler transistor to keep the two circuits separate. The H11AA1X is designed for AC input as it contains two leds, one for each AC current direction. I connected the H11AA1X in series with the doorbell circuit along with a small 470ohm resistor (to protect the leds in the optocoupler). I also have a couple of leds in the circuit so that I can see when something happens. I have tested the prototype away from the doorbell circuit using a separate (admittedly DC) power supply and simulated the doorbell switch and it works fine. But when I connect it to the doorbell circuit I can not get it to respond to the doorbell switch and the bell itself does not ding-dong.</p>
<p>I now have a working prototype, although I am still a bit worried about the current the H11AA1X is handling.I realised that my original "test" led on the AC side of the circuit was probably a bad idea and removed that. I created a simple circuit with just the H11AA1X and the smallest resistor I had in series with the doorbell circuit. I put 5v across the collector and emitter with an led and a resistor across the DC side of the H11AA1X. When I pressed the doorbell the DC led lit up but the dinger did not dong. I obviously had too much resistance on the AC side to trigger the solenoid. It occurred to me that the bell solenoid is already providing sufficient resistance and that I could probably run the H11AA1X without an additional resistor. So I tried that and it worked. My test meter can't do AC current so I have no idea what current is actually flowing through the H11AA1X. I did find a web site that described the transformer as 1amp, so fingers crossed it will be OK. Here's my working circuit diagram.</p>
<p><a href="http://www.freakent.co.uk/2011/11/07/idoorbell/idoorbell-2/" rel="attachment wp-att-564"><img class="aligncenter size-full wp-image-564" alt="iDoorbell" src="http://www.freakent.co.uk/wp-content/uploads/2013/01/iDoorbell.jpg" width="508" height="202" /></a></p>
<p>I also got it to work by building a different circuit with&nbsp; the H11AA1X and a resistor in parallel with the bell solenoid. Unfortunately that would entail extra wires and the Arduino to be installed in our hall way which would not pass the wife-acceptance-test. The bell transformer is in our garage so&nbsp; well out of sight but it does only leave the possibility of connecting my iDoorbell Arduino in series.</p>
<div>I have pushed my iDoorbell code up to github. If anyone is interested in looking at or using my code then click here.<br />
<a href="https://github.com/freakent/iDoorbell">https://github.com/freakent/iDoorbell</a></div>
